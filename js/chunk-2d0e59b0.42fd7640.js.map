{"version":3,"sources":["webpack:///./src/components/SubmitBlock.vue?cc8f","webpack:///./src/components/BaseSubmitBlock.vue?8c50","webpack:///src/components/BaseSubmitBlock.vue","webpack:///./src/components/BaseSubmitBlock.vue?9706","webpack:///./src/components/BaseSubmitBlock.vue","webpack:///src/components/SubmitBlock.vue","webpack:///./src/components/SubmitBlock.vue?f839","webpack:///./src/components/SubmitBlock.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","isFormValid","missedNames","isLoading","modalProps","on","onSubmit","$event","showModal","staticRenderFns","staticClass","submitDisabled","preventDefault","onClick","_v","_e","modal","status","$emit","_s","text","name","components","BaseModal","BaseMessage","BaseSubmitHelp","props","type","Boolean","required","Array","default","Object","computed","methods","component","BaseSubmitBlock","data","isError","isSuccess","orderId","modalStatus","modalText","show","sendData"],"mappings":"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","file":"js/chunk-2d0e59b0.42fd7640.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('BaseSubmitBlock',{attrs:{\"is-form-valid\":_vm.isFormValid,\"missed-names\":_vm.missedNames,\"is-loading\":_vm.isLoading,\"modal\":_vm.modalProps},on:{\"submit\":_vm.onSubmit,\"close-modal\":function($event){_vm.showModal=false}}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form__submit-block\"},[_c('button',{staticClass:\"form__submit-btn\",attrs:{\"type\":\"submit\",\"disabled\":_vm.submitDisabled},on:{\"click\":function($event){$event.preventDefault();return _vm.onClick($event)}}},[_vm._v(\" Заказать \")]),_c('div',{staticClass:\"form__submit-state\",attrs:{\"aria-live\":\"polite\"}},[(_vm.isLoading)?_c('BaseMessage',{attrs:{\"status\":\"loading\"}},[_vm._v(\" Идет отправка... \")]):(!_vm.isFormValid)?_c('BaseSubmitHelp',{staticClass:\"form__submit-help\",attrs:{\"missed-items\":_vm.missedNames}}):_vm._e()],1),(_vm.modal.show)?_c('BaseModal',{attrs:{\"status\":_vm.modal.status},on:{\"close\":function($event){return _vm.$emit('close-modal')}}},[_vm._v(\" \"+_vm._s(_vm.modal.text)+\" \")]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"form__submit-block\">\n    <button\n      class=\"form__submit-btn\"\n      type=\"submit\"\n      :disabled=\"submitDisabled\"\n      @click.prevent=\"onClick\"\n    >\n      Заказать\n    </button>\n    <div\n      class=\"form__submit-state\"\n      aria-live=\"polite\"\n    >\n      <BaseMessage\n        v-if=\"isLoading\"\n        status=\"loading\"\n      >\n        Идет отправка...\n      </BaseMessage>\n      <BaseSubmitHelp\n        v-else-if=\"!isFormValid\"\n        class=\"form__submit-help\"\n        :missed-items=\"missedNames\"\n      />\n    </div>\n    <BaseModal\n      v-if=\"modal.show\"\n      :status=\"modal.status\"\n      @close=\"$emit('close-modal')\"\n    >\n      {{ modal.text }}\n    </BaseModal>\n  </div>\n</template>\n<script>\nexport default {\n  name: 'BaseSubmitBlock',\n  components: {\n    BaseModal: () => import('./BaseModal'),\n    BaseMessage: () => import('./BaseMessage'),\n    BaseSubmitHelp: () => import('./BaseSubmitHelp'),\n  },\n  props: {\n    isFormValid: {\n      type: Boolean,\n      required: true,\n    },\n    missedNames: {\n      type: Array,\n      required: true,\n    },\n    isLoading: {\n      type: Boolean,\n      default: false,\n    },\n    modal: {\n      type: Object,\n      required: true,\n    },\n  },\n  computed: {\n    submitDisabled() {\n      return !this.isFormValid || this.isLoading;\n    },\n  },\n  methods: {\n    onClick() {\n      this.$emit('submit');\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BaseSubmitBlock.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BaseSubmitBlock.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BaseSubmitBlock.vue?vue&type=template&id=6311ac1f&\"\nimport script from \"./BaseSubmitBlock.vue?vue&type=script&lang=js&\"\nexport * from \"./BaseSubmitBlock.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <BaseSubmitBlock\n    :is-form-valid=\"isFormValid\"\n    :missed-names=\"missedNames\"\n    :is-loading=\"isLoading\"\n    :modal=\"modalProps\"\n    @submit=\"onSubmit\"\n    @close-modal=\"showModal=false\"\n  />\n</template>\n<script>\nimport { mapGetters, mapActions } from 'vuex';\n\nimport BaseSubmitBlock from './BaseSubmitBlock';\n\nexport default {\n  name: 'SubmitBlock',\n  components: {\n    BaseSubmitBlock,\n  },\n  data() {\n    return ({\n      isError: false,\n      isLoading: false,\n      isSuccess: false,\n      showModal: false,\n      orderId: 0,\n    });\n  },\n  computed: {\n    ...mapGetters('form', ['isFormValid', 'missedNames']),\n    modalStatus() {\n      if (this.isError) return 'error';\n      if (this.isSuccess) return 'success';\n      return '';\n    },\n    modalText() {\n      switch (this.modalStatus) {\n        case 'success':\n          return `Ваш заказ успешно сформирован! Номер заказа - ${this.orderId}`;\n        case 'error':\n          return 'Произошла ошибка отправки, пожалуйста повторите попытку позже...';\n        default:\n          return '';\n      }\n    },\n    modalProps() {\n      return ({\n        show: this.showModal,\n        status: this.modalStatus,\n        text: this.modalText,\n      });\n    },\n  },\n  methods: {\n    ...mapActions(['sendData']),\n    ...mapActions('form', ['reset']),\n    onSubmit() {\n      this.isLoading = true;\n      this.isSuccess = false;\n      this.isError = false;\n\n      this.sendData()\n        .then(({ data: { id } }) => {\n          this.orderId = id;\n          this.reset();\n          this.isSuccess = true;\n        })\n        .catch(() => {\n          this.isError = true;\n        })\n        .finally(() => {\n          this.isLoading = false;\n          this.showModal = true;\n        });\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SubmitBlock.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SubmitBlock.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SubmitBlock.vue?vue&type=template&id=0fdbae9c&\"\nimport script from \"./SubmitBlock.vue?vue&type=script&lang=js&\"\nexport * from \"./SubmitBlock.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}